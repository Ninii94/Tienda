{"ast":null,"code":"var _jsxFileName = \"D:\\\\Nini\\\\programacion\\\\Tienda\\\\src\\\\components\\\\SuccessPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport '../components/succespage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SuccessPage() {\n  _s();\n  const [orderSaved, setOrderSaved] = useState(false);\n  const location = useLocation();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const saveOrder = async () => {\n      const searchParams = new URLSearchParams(location.search);\n      const paymentId = searchParams.get('payment_id');\n      const status = searchParams.get('status');\n      if (status === 'approved' && !orderSaved) {\n        try {\n          const pendingOrder = JSON.parse(localStorage.getItem('pendingOrder') || '{}');\n          if (!pendingOrder.cart || !pendingOrder.customerInfo) {\n            console.error('No se encontró información de la orden pendiente');\n            return;\n          }\n          const orderData = {\n            paymentId,\n            customerInfo: pendingOrder.customerInfo,\n            cart: pendingOrder.cart,\n            total: pendingOrder.total,\n            status: 'completed',\n            createdAt: new Date().toISOString()\n          };\n\n          // Verificar si la orden ya existe\n          const existingOrders = await axios.get('http://localhost:3001/orders');\n          const orderExists = existingOrders.data.some(order => order.paymentId === paymentId);\n          if (!orderExists) {\n            await axios.post('http://localhost:3001/orders', orderData);\n            console.log('Orden guardada exitosamente');\n            setOrderSaved(true);\n            localStorage.removeItem('pendingOrder');\n          } else {\n            console.log('La orden ya existe, no se guardará de nuevo');\n            setOrderSaved(true);\n          }\n        } catch (error) {\n          console.error('Error al guardar la orden:', error);\n        }\n      }\n    };\n    if (!orderSaved) {\n      saveOrder();\n    }\n  }, [location, orderSaved]);\n  const handleContinueShopping = () => {\n    navigate('/');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"success-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"success-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"success-title\",\n        children: \"\\xA1Pago Exitoso!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"success-icon\",\n        children: \"\\uD83D\\uDC97\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"success-message\",\n        children: \"Gracias por tu compra. Nos contactaremos a la brevedad. \\xBFTuviste un problema? cu\\xE9ntanos: \\uD83D\\uDCDE3816591850\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"continue-shopping-btn\",\n        onClick: handleContinueShopping,\n        children: \"Seguir Comprando\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(SuccessPage, \"cpiOGwbygTU2ip+5LkAma/SpGHU=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = SuccessPage;\nexport default SuccessPage;\nvar _c;\n$RefreshReg$(_c, \"SuccessPage\");","map":{"version":3,"names":["React","useEffect","useState","axios","useLocation","useNavigate","jsxDEV","_jsxDEV","SuccessPage","_s","orderSaved","setOrderSaved","location","navigate","saveOrder","searchParams","URLSearchParams","search","paymentId","get","status","pendingOrder","JSON","parse","localStorage","getItem","cart","customerInfo","console","error","orderData","total","createdAt","Date","toISOString","existingOrders","orderExists","data","some","order","post","log","removeItem","handleContinueShopping","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["D:/Nini/programacion/Tienda/src/components/SuccessPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport '../components/succespage.css';\r\n\r\nfunction SuccessPage() {\r\n  const [orderSaved, setOrderSaved] = useState(false);\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const saveOrder = async () => {\r\n      const searchParams = new URLSearchParams(location.search);\r\n      const paymentId = searchParams.get('payment_id');\r\n      const status = searchParams.get('status');\r\n\r\n      if (status === 'approved' && !orderSaved) {\r\n        try {\r\n          const pendingOrder = JSON.parse(localStorage.getItem('pendingOrder') || '{}');\r\n          \r\n          if (!pendingOrder.cart || !pendingOrder.customerInfo) {\r\n            console.error('No se encontró información de la orden pendiente');\r\n            return;\r\n          }\r\n\r\n          const orderData = {\r\n            paymentId,\r\n            customerInfo: pendingOrder.customerInfo,\r\n            cart: pendingOrder.cart,\r\n            total: pendingOrder.total,\r\n            status: 'completed',\r\n            createdAt: new Date().toISOString()\r\n          };\r\n\r\n          // Verificar si la orden ya existe\r\n          const existingOrders = await axios.get('http://localhost:3001/orders');\r\n          const orderExists = existingOrders.data.some(order => order.paymentId === paymentId);\r\n\r\n          if (!orderExists) {\r\n            await axios.post('http://localhost:3001/orders', orderData);\r\n            console.log('Orden guardada exitosamente');\r\n            setOrderSaved(true);\r\n            localStorage.removeItem('pendingOrder');\r\n          } else {\r\n            console.log('La orden ya existe, no se guardará de nuevo');\r\n            setOrderSaved(true);\r\n          }\r\n        } catch (error) {\r\n          console.error('Error al guardar la orden:', error);\r\n        }\r\n      }\r\n    };\r\n\r\n    if (!orderSaved) {\r\n      saveOrder();\r\n    }\r\n  }, [location, orderSaved]);\r\n\r\n  const handleContinueShopping = () => {\r\n    navigate('/');\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"success-container\">\r\n      <div className=\"success-content\">\r\n        <h1 className=\"success-title\">¡Pago Exitoso!</h1>\r\n        <div className=\"success-icon\">💗</div>\r\n        <p className=\"success-message\">\r\n          Gracias por tu compra. Nos contactaremos a la brevedad.\r\n          ¿Tuviste un problema? cuéntanos: 📞3816591850\r\n        </p>\r\n        <button className=\"continue-shopping-btn\" onClick={handleContinueShopping}>\r\n          Seguir Comprando\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SuccessPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}